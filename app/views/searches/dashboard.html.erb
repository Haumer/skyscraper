<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'Search-History')">Search History</button>
  <button class="tablinks" onclick="openCity(event, 'Top-Jobs')">Top-Jobs</button>
  <button class="tablinks" onclick="openCity(event, 'Suggestions')">Suggestions</button>
</div>

<div id="Search-History" class="tabcontent text-center">
  <% @searches.each do |search| %>
    <div class="col-xs-4">
      <div class="card">
        <%= link_to search_path(search) do %>
          <%= search.title %>
          <%= search.location %>
          <%= search.created_at %>
          <%= search.source %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<div id="Top-Jobs" class="tabcontent">
  <div class="seach-keywords">
    <% @total.each do |element| %>
      <% count = ((element.last.to_f / @total.map {|e| e.last}.sum) * 100).to_i %>
      <%= element.first %>: <%= element.last %>
      <br>
      <div class="graph">
        <% if count < 1 %>
          <div class="graph-element"></div>
        <% else %>
          <% count.times do  %>
            <div class="graph-element"></div>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>


<div id="Suggestions" class="tabcontent">

</div>

<script>
function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
}
</script>
